install.packages("knitr")
install.packages("MASS")
install.packages("ggplot2")
install.packages("xtable")
library("knitr", lib.loc="/home/manatee/R/x86_64-pc-linux-gnu-library/3.0")
spl = strsplit(getwd(), '/')
nwd = paste(spl[[1]][1:(length(spl[[1]]) - 2)], collapse = '/')
nwd
nwd = paste(nwd, "pairparser/results", sep = "/")
setwd("~/Programming/sentiment_dict_mining_2014/Sergej-and-Egor/plots/resanalysis")
spl = strsplit(getwd(), '/')
nwd = paste(spl[[1]][1:(length(spl[[1]]) - 2)], collapse = '/')
nwd = paste(nwd, "pairparser/results", sep = "/")
nwd
fname = "en_pairs(7).txt"
df = read.table(paste(nwd, fname, sep = "/"), skip = 1, stringsAsFactors=FALSE, encoding="UTF-8")
colnames(df) <- c("pos", "neg", "a1", "a2")
dict = unique(append(unique(df[['a1']]), unique(df[['a2']])))
dict_len = length(dict)
nwd = paste(nwd, "results", sep = "/")
spl = strsplit(getwd(), '/')
nwd = paste(spl[[1]][1:(length(spl[[1]]) - 2)], collapse = '/')
nwd = paste(nwd, "results", sep = "/")
nwd
fname = paste(c("pos", ftag, ".txt"), collapse='')
ftag = '7_3'
fname = paste(c("pos", ftag, ".txt"), collapse='')
fname
pos_dict = scan(paste(nwd, fname, sep = "/"), what=character())
fname = paste(c("neg", ftag, ".txt"), collapse='')
neg_dict = scan(paste(nwd, fname, sep = "/"), what=character())
neg_coef = 3
ndf = df
ndf$neg = ndf$neg * neg_coef
paste(c("sums", ftag, ".txt"), collapse='')
sums = read.table(fname = paste(c("sums", ftag, ".txt"), collapse=''), stringsAsFactors=FALSE, col.names = c('word', 's'))
sums = read.table(paste(c("sums", ftag, ".txt"), collapse=''), stringsAsFactors=FALSE, col.names = c('word', 's'))
comp_dict = read.table('../../../testing/500_neg.txt', stringsAsFactors=FALSE, encoding="UTF-8")
comp_dict
comp_dict = read.table('../../../testing/500_neg.txt', stringsAsFactors=FALSE, encoding="UTF-8")[, 'V1']
comp_dict
comp_dict = read.table('../../../testing/500_neg.txt', stringsAsFactors=FALSE, encoding="UTF-8")[, 'V1']
comp_dict = c(comp_dict, read.table('../../../testing/500_pos.txt', stringsAsFactors=FALSE, encoding="UTF-8")[, 'V1'])
comp_dict
э
'спокойный' %in% comp_dict
which(sums$w %in% comp_dict)
which(nsums$w %in% neg_dict)
sums
fsums = sums
fsums$s = factor(fsums$s)
lvls = levels(fsums$s)
counts = matrix(rep(0, 3 * length(lvls)), ncol = 3)
counts[, 1] = as.numeric(lvls)
lvls
sums = read.table(paste(c("sums", ftag, "d.txt"), collapse=''), stringsAsFactors=FALSE, col.names = c('word', 's'))
fsums = sums
fsums$s = factor(fsums$s)
lvls = levels(fsums$s)
counts = matrix(rep(0, 3 * length(lvls)), ncol = 3)
counts[, 1] = as.numeric(lvls)
lvls
View(counts)
fsums$s = factor(fsums$s)
lvls = levels(fsums$s)
counts = matrix(rep(0, 3 * length(lvls)), ncol = 3)
counts[, 1] = as.numeric(lvls)
cwords = list(list(), length = length(lvls))
for (i in 1:length(lvls)) {
buf = fsums[fsums$s == lvls[i], ]
cpos <- buf[buf$word %in% pos_dict, 'word']
cneg <- buf[buf$word %in% neg_dict, 'word']
cur = list(lvl1 = lvls[i], pos = cpos,neg = cneg)
cwords[[i]] = cur
counts[i, 2] = nrow(buf[buf$word %in% pos_dict, ]) # pos
counts[i, 3] = nrow(buf[buf$word %in% neg_dict, ]) # neg
}
View(counts)
